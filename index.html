<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shrey's Portfolio OS</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --background-image: url('https://images.unsplash.com/photo-1620121692029-d088224ddc74?q=80&w=3732&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            --glass-bg: rgba(20, 20, 20, 0.65);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-primary: rgba(255, 255, 255, 0.9);
            --text-secondary: rgba(255, 255, 255, 0.6);
            --accent-color: #0091ff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-image: var(--background-image);
            background-size: cover;
            background-position: center;
            height: 100vh;
            overflow: hidden;
            color: var(--text-primary);
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        
        /* Top Menu Bar */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 32px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            z-index: 1000;
            font-size: 13px;
            font-weight: 500;
        }
        
        .top-bar-left { display: flex; align-items: center; }
        .logo { font-weight: 600; margin-right: 20px; }
        .menu-items { display: flex; gap: 16px; }
        .menu-item { color: var(--text-secondary); cursor: pointer; transition: color 0.2s; }
        .menu-item:hover { color: var(--text-primary); }
        .top-bar-right { display: flex; align-items: center; gap: 12px; font-size: 12px; }
        
        .notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 24px;
            background: #000;
            border-radius: 0 0 12px 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 500;
            color: var(--text-secondary);
        }
        
        /* Main Desktop Area */
        .desktop {
            position: fixed;
            top: 32px;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            padding: 20px;
            gap: 20px;
        }
        
        /* Left Side - Personal Apps */
        .left-panel {
            width: 380px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            flex-shrink: 0;
        }
        
        /* Phone Container */
        .phone-container { flex: 1; display: flex; align-items: center; justify-content: center; }
        
        .phone {
            width: 320px;
            height: 640px;
            background: #111;
            border-radius: 40px;
            padding: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), inset 0 0 1px 1px rgba(255,255,255,0.1);
            display: flex;
            flex-direction: column;
            position: relative;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .phone-notch { position: absolute; top: 12px; left: 50%; transform: translateX(-50%); width: 140px; height: 28px; background: #111; border-radius: 0 0 16px 16px; z-index: 2; }
        .screen { background: #000; flex-grow: 1; border-radius: 28px; display: flex; flex-direction: column; overflow: hidden; position: relative; box-shadow: inset 0 0 10px rgba(0,0,0,0.5); }
        .status-bar { color: white; font-size: 12px; font-weight: 500; display: flex; align-items: center; justify-content: space-between; padding: 18px 24px 10px; z-index: 1; }
        .status-bar-icons { display: flex; align-items: center; gap: 4px; }
        
        /* Messages App Styles */
        .inbox-header { padding: 10px 20px; }
        .inbox-header h1 { font-size: 28px; margin: 0; }
        .contact-list { flex-grow: 1; overflow-y: auto; }
        
        .contact { display: flex; align-items: center; padding: 12px 20px; border-bottom: 1px solid #3a3a3c; cursor: pointer; transition: background 0.2s; }
        .contact:hover { background: #2c2c2e; }
        
        .contact-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #555;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            font-size: 20px;
            flex-shrink: 0; /* Prevents squishing */
        }
        
        .contact-details { flex-grow: 1; overflow: hidden; }
        .contact-name { font-weight: bold; display: flex; justify-content: space-between; }
        .contact-name span:last-child { font-weight: normal; color: #8e8e93; font-size: 14px; }
        .contact-preview { color: #8e8e93; font-size: 15px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        
        /* Chat View */
        .chat-view { display: flex; flex-direction: column; height: 100%; }
        .chat-header { display: flex; align-items: center; padding: 10px 15px; background: #1c1c1e; border-bottom: 1px solid #3a3a3c; }
        .back-button { color: var(--accent-color); cursor: pointer; font-size: 16px; margin-right: 10px; }
        .chat-contact-name { font-weight: bold; text-align: center; flex-grow: 1; }
        .message-area { flex-grow: 1; padding: 20px 15px; overflow-y: auto; display: flex; flex-direction: column; }
        .message { padding: 10px 15px; border-radius: 18px; margin-bottom: 8px; max-width: 75%; line-height: 1.4; }
        .message.incoming { background: #3a3a3c; align-self: flex-start; }
        .message.outgoing { background: var(--accent-color); align-self: flex-end; }
        
        /* Right Panel - Main Window */
        .right-panel { flex: 1; display: flex; align-items: center; justify-content: center; padding: 2vh; }
        
        .main-window {
            width: 100%;
            height: 100%;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            user-select: auto;
            -webkit-user-select: auto;
            -moz-user-select: auto;
            -ms-user-select: auto;
        }
        
        .window-title-bar { display: flex; align-items: center; padding: 0 12px; height: 40px; background: rgba(0, 0, 0, 0.2); border-bottom: 1px solid var(--glass-border); flex-shrink: 0; }
        .window-controls { display: flex; gap: 8px; }
        .window-dot { height: 12px; width: 12px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .window-dot span { color: #000; font-weight: bold; font-size: 10px; opacity: 0; transition: opacity 0.2s; }
        .window-dot:hover span { opacity: 0.7; }
        .window-dot.red { background: #ff5f56; }
        .window-dot.yellow { background: #ffbd2e; }
        .window-dot.green { background: #27c93f; }
        .window-title { flex: 1; text-align: center; font-weight: 600; font-size: 14px; }
        
        .tabs { display: flex; background: rgba(0, 0, 0, 0.1); padding: 8px 12px 0; border-bottom: 1px solid var(--glass-border); }
        .tab { padding: 10px 18px; cursor: pointer; border-radius: 8px 8px 0 0; margin-right: 4px; background: transparent; font-weight: 500; color: var(--text-secondary); transition: all 0.2s ease; border-bottom: 2px solid transparent; }
        .tab:hover { background: rgba(255, 255, 255, 0.05); color: var(--text-primary); }
        .tab.active { background: rgba(0, 0, 0, 0.2); color: var(--text-primary); border-bottom: 2px solid var(--accent-color); }
        
        .window-content { padding: 24px; overflow-y: auto; flex-grow: 1; }
        
        /* Professional Section - Search Engine Theme */
        .search-engine-header { text-align: center; padding: 1rem 0; }
        .search-engine-title { font-size: 2.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: 1rem; }
        .search-bar { background: rgba(0,0,0,0.2); border: 1px solid var(--glass-border); border-radius: 8px; padding: 12px 16px; margin: 0 auto 2rem; width: 80%; max-width: 500px; font-size: 1rem; color: var(--text-primary); }
        .search-bar::after { content: '|'; animation: blink 1s step-end infinite; }
        @keyframes blink { 50% { opacity: 0; } }
        
        .experience-sub-tabs { display: flex; justify-content: center; gap: 1rem; margin-bottom: 2rem; }
        .experience-sub-tab { padding: 8px 16px; border-radius: 8px; cursor: pointer; font-weight: 500; color: var(--text-secondary); transition: all 0.2s; }
        .experience-sub-tab.active { background: var(--accent-color); color: white; }
        
        .experience-entry { display: flex; align-items: center; gap: 20px; margin-bottom: 28px; border-bottom: 1px solid var(--glass-border); padding-bottom: 20px; opacity: 0; animation: fadeIn 0.5s forwards; }
        .experience-entry:last-child { border-bottom: none; }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

        .experience-details { flex-grow: 1; }
        .experience-title { font-size: 1.2rem; font-weight: 700; color: var(--accent-color); cursor: pointer; text-decoration: none; display: inline-block; margin: 0 0 4px; }
        .experience-title:hover { text-decoration: underline; }
        .experience-source { font-size: 0.95rem; color: var(--text-primary); margin: 0 0 8px 0; }
        .experience-snippet { font-size: 0.9rem; color: var(--text-secondary); margin: 0; line-height: 1.5; }
        .experience-logo { width: 50px; height: 50px; border-radius: 8px; object-fit: cover; background: #333; flex-shrink: 0; }
        
        /* Modal */
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.7); display: flex; align-items: center; justify-content: center; z-index: 2000; animation: fadeIn 0.3s; }
        .modal-window { 
            background: rgba(30, 30, 30, 0.8); 
            backdrop-filter: blur(20px); 
            -webkit-backdrop-filter: blur(20px); 
            border-radius: 12px; 
            width: 60%; 
            max-width: 700px; 
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); 
            border: 1px solid var(--glass-border);
            display: flex;
            flex-direction: column;
            max-height: 80vh;
            animation: scaleUp 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
        }
        .modal-window.fullscreen {
            width: 100vw;
            height: 100vh;
            top: 0;
            left: 0;
            border-radius: 0;
            max-width: 100%;
            max-height: 100%;
            position: fixed;
        }
        @keyframes scaleUp { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .modal-content { 
            padding: 24px; 
            overflow-y: auto; 
            transition: font-size 0.4s ease;
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
        }
        .modal-window.fullscreen .modal-content { font-size: 1.15rem; }
        .modal-content h2 { margin-top: 0; color: var(--accent-color); }
        .modal-content p { margin: 8px 0; }
        .modal-content ul { padding-left: 20px; list-style-position: inside; }
        
        /* Thoughts Section */
        .thoughts-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 24px; }
        .thought-post {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--glass-border);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
            cursor: pointer;
            height: 260px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .thought-post:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 12px 40px rgba(0,0,0,0.4);
            background: rgba(255, 255, 255, 0.1);
        }
        .thought-post h3 {
            margin: 0 0 8px 0;
            color: var(--text-primary);
            font-size: 1.1rem;
        }
        .thought-post em {
            color: var(--text-secondary);
            font-size: 0.85rem;
            opacity: 0.8;
            margin-bottom: 12px;
        }
        .thought-post p {
            color: var(--text-secondary);
            line-height: 1.6;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 5;
            -webkit-box-orient: vertical;
            font-size: 0.9rem;
        }
        
        /* Bottom Task Bar */
        .taskbar {
            position: fixed;
            bottom: -55px; /* Partially hidden */
            left: 50%;
            transform: translateX(-50%);
            height: 60px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 16px;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            transition: bottom 0.3s ease-in-out;
        }
        .taskbar:hover {
            bottom: 20px;
        }
        .taskbar-content { display: flex; align-items: center; gap: 24px; }
        .taskbar-link { color: var(--text-secondary); text-decoration: none; font-weight: 500; font-size: 14px; transition: color 0.2s ease, transform 0.2s ease; display: inline-block; }
        .taskbar-link:hover { color: var(--text-primary); transform: scale(1.05); }
        
        /* Mobile Blocker */
        .mobile-blocker {
            display: none; /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            color: white;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            z-index: 9999;
        }
        .mobile-blocker h2 { margin-bottom: 1rem; }

        /* Responsive Design */
        @media (max-width: 1024px) {
            body > #root > div { display: none; }
            .mobile-blocker { display: flex; }
        }
        @media (min-width: 1025px) and (max-width: 1200px) {
            .desktop { flex-direction: column; }
            .left-panel { width: 100%; flex-direction: row; height: auto; }
            .spotify-embed { flex: 1; }
            .phone-container { flex: none; }
            .right-panel { flex: 1; margin-top: 20px; padding: 0; }
        }
    </style>
</head>
<body>
    
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, StrictMode } = React;
        
        // --- DATA ---
        const experiencesData = {
          professional: [
            { title: "Backend Software Engineer Intern", company: "Fetch", location: "Madison, WI", dates: "May 2025 – Aug 2025", description: ["Architected and deployed a FastAPI-based location auditor service to identify near-miss receipt matches—driving an average increase of 4,000 matched receipts / year per audited location and unlocking $1.3M+ in annual partner revenue", "Developed an LLM-driven agentic receipt surfacer, automating receipt detection and eliminating manual review effort", "Created a Grafana dashboard to monitor audit performance and revenue impact, and remediate mis-audited locations"], logo: "https://logoeps.com/wp-content/uploads/2023/03/fetch-vector-logo.png" },
            { title: "Founder", company: "Piles", location: "Madison, WI", dates: "May 2025 - Present", description: ["Building iOS application to allow users to express themselves by organizing and curating content from across the internet", "Leading team of three developers through product/marketing sprints using AGILE project management framework", "Implementing A/B tests of features and trial marketing runs with users to increase engagement in initial product"], logo: "https://placehold.co/64x64/333333/aaaaaa?text=P" },
            { title: "Software Engineer Intern", company: "sidebetz.ai", location: "Remote", dates: "May 2024 – Jan 2025", description: ["Developed the world's first historical vault of live-streamed high-stakes poker game data and player behavior for optimizing the application's odds engine", "Leveraged and trained object detection and optical character recognition models with PyTorch in order to generate actionable data from previous live streams", "Created an application capable of parsing thousands of hours of poker live-stream video for player actions and behaviors through pattern recognition and data analysis"], logo: "https://placehold.co/64x64/333333/aaaaaa?text=SB" },
            { title: "Backend Software Engineer Intern", company: "TAO Digital Solutions", location: "Taipei, Taiwan", dates: "June 2024 – July 2024", description: ["Developed a working CQRS software architecture pattern with Java and SpringBoot and tested using Docker with a leadership election system to minimize server downtime", "Implemented event-driven micro-services and event sourcing using Kafka clusters managed by Zookeeper", "Created RESTful API endpoints for the client's (CDK Global) backend to access the data store using CQRS architecture"], logo: "https://placehold.co/64x64/333333/aaaaaa?text=TAO" }
          ],
          projects: [
            { title: "Curio - Personalized Learning Management System", company: "React, TypeScript, Node.js, Express.js, MongoDB, Flask, Docker", location: "Personal Project", dates: "November 2024", description: ["Developed Curio, a personalized Learning Management System that empowers teachers to generate content matching students' interests", "Architected a Node.js/Express backend with MongoDB database that manages student profiles, teacher dashboards, and learning material distribution through RESTful APIs", "Engineered a containerized Python/Flask AI engine using Docker to automatically generate educational questions tailored to student interests"], logo: "https://placehold.co/64x64/333333/aaaaaa?text=C" },
            { title: "FastAPI Receipt Processing Pipeline", company: "FastAPI, HNSW Vector Search, Grafana", location: "Fetch Internship", dates: "Summer 2025", description: ["Refactored the hot-path matching endpoint into a configurable multi-stage search pipeline utilizing an HNSW vector index, geolocation search, and phone # lookup", "Enhanced system configurability with the capability to handle 100 requests / second", "Built a location-mapping application with FastAPI enabling rapid onboarding of partners and accelerating offer launch cycles"], logo: "https://placehold.co/64x64/333333/aaaaaa?text=FR" },
            { title: "Computer Vision Poker Analytics", company: "PyTorch, OpenCV, Pandas, NumPy", location: "sidebetz.ai", dates: "2024-2025", description: ["Leveraged and trained object detection and optical character recognition models with PyTorch", "Created an application capable of parsing thousands of hours of poker live-stream video for player actions and behaviors", "Implemented pattern recognition and data analysis to generate actionable insights for odds optimization"], logo: "https://placehold.co/64x64/333333/aaaaaa?text=CV" }
          ],
          education: [
            { title: "Computer Sciences B.S. & Mathematics B.S.", company: "University of Wisconsin-Madison", location: "Madison, Wisconsin", dates: "Expected Graduation May 2026", description: ["Relevant Coursework: Operating Systems, Relational Databases, Big Data Systems, User Interfaces, Computer Networks, Information Security", "Double major in Computer Sciences and Mathematics", "Focus on backend systems, distributed computing, and machine learning applications"], logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/University_of_Wisconsin-Madison_logo.svg/1200px-University_of_Wisconsin-Madison_logo.svg.png" }
          ]
        };
        
        const blogPosts = [
            { id: 1, title: "Building Scalable APIs with FastAPI", date: "August 12, 2025", content: "During my internship at Fetch, I had the opportunity to work extensively with FastAPI to build high-performance backend services. Here's what I learned about architecting scalable receipt processing pipelines that can handle 100+ requests per second. The key insights include proper async/await usage, implementing efficient database queries, and leveraging HNSW vector indexing for similarity search. One of the most challenging aspects was optimizing the hot-path matching endpoint while maintaining configurability for different partner requirements." },
            { id: 2, title: "Computer Vision in Production: Lessons from Poker Analytics", date: "August 10, 2025", content: "Working on live-stream poker analysis at sidebetz.ai taught me valuable lessons about deploying computer vision models in production. PyTorch model optimization, handling variable video quality, and managing inference latency were crucial challenges. The project involved training custom OCR models to detect card values and player actions from thousands of hours of video data. Key learnings include the importance of data preprocessing, model versioning, and creating robust pipelines that can handle edge cases in real-world video feeds." },
            { id: 3, title: "From Microservices to Event Sourcing", date: "August 8, 2025", content: "My experience in Taiwan working with CQRS patterns and event-driven architecture fundamentally changed how I think about system design. Implementing Kafka clusters with Zookeeper for event sourcing taught me about the complexities of distributed systems. The separation of read and write workloads through CQRS not only improved performance but also provided better scalability patterns. Docker containerization and proper service orchestration became essential skills for managing the complexity of microservices architectures." },
        ];

        const conversations = {
            tech: { name: "Tech Stack", avatar: "💻", avatarColor: '#5856d6', messages: [ { sender: 'me', text: 'What technologies are you most excited about right now?' }, { sender: 'contact', text: 'Definitely FastAPI for backend development and PyTorch for ML. Also diving deep into distributed systems with Kafka and event sourcing patterns.' } ] },
            projects: { name: "Projects", avatar: "🚀", avatarColor: '#ff9500', messages: [ { sender: 'me', text: 'Tell me about your coolest project lately' }, { sender: 'contact', text: 'I built a computer vision system that analyzes poker livestreams! It uses PyTorch for OCR and can process thousands of hours of video to extract player behavior patterns.' } ] },
            goals: { name: "Goals", avatar: "🎯", avatarColor: '#34c759', messages: [ { sender: 'me', text: 'What are you working towards?' }, { sender: 'contact', text: 'Finishing my CS/Math double major at UW-Madison and growing Piles into a platform people actually love using. Also want to get better at system design and distributed computing.' } ] }
        };

        // --- Reusable Modal Component ---
        const MacOSModal = ({ children, title, onClose, onGreenButtonClick, isFullScreen }) => (
            <div className="modal-overlay" onClick={onClose}>
                <div className={`modal-window ${isFullScreen ? 'fullscreen' : ''}`} onClick={(e) => e.stopPropagation()}>
                    <div className="window-title-bar">
                        <div className="window-controls">
                            <div className="window-dot red" onClick={onClose}><span>×</span></div>
                            <div className="window-dot yellow"></div>
                            <div className="window-dot green" onClick={onGreenButtonClick}></div>
                        </div>
                        <div className="window-title">{title}</div>
                        <div style={{width: '58px'}}></div>
                    </div>
                    <div className="modal-content">
                        {children}
                    </div>
                </div>
            </div>
        );

        // --- COMPONENTS ---

        // Professional Section Component (For Main Window)
        const Professional = () => {
            const [selectedExperience, setSelectedExperience] = useState(null);
            const [activeCategory, setActiveCategory] = useState('professional');
            const [searchText, setSearchText] = useState("");
            const [isSearching, setIsSearching] = useState(true);
            const [loaded, setLoaded] = useState(false);
            const fullSearchText = "my experience";

            useEffect(() => {
                let i = 0;
                const typingInterval = setInterval(() => {
                    setSearchText(fullSearchText.substring(0, i + 1));
                    i++;
                    if (i > fullSearchText.length) {
                        clearInterval(typingInterval);
                        setIsSearching(false);
                        setTimeout(() => setLoaded(true), 100);
                    }
                }, 150);
                return () => clearInterval(typingInterval);
            }, []);

            const renderExperience = (exp, index) => (
                <div key={index} className="experience-entry" style={{ animationDelay: `${index * 0.1}s` }}>
                    <div className="experience-details">
                        <a href="#" className="experience-title" onClick={(e) => { e.preventDefault(); setSelectedExperience(exp); }}>{exp.title}</a>
                        <p className="experience-source">{exp.company} — {exp.location}</p>
                        <p className="experience-snippet">{exp.description[0]}...</p>
                    </div>
                    <img src={exp.logo} alt={`${exp.company} logo`} className="experience-logo" />
                </div>
            );

            return (
                <div className="window-content">
                    <div className="search-engine-header">
                        <h1 className="search-engine-title">SHREY Search</h1>
                        <div className="search-bar">{searchText}</div>
                    </div>
                    {loaded && (
                        <div style={{animation: 'fadeIn 0.5s forwards', opacity: 0}}>
                            <div className="experience-sub-tabs">
                                {Object.keys(experiencesData).map(key => (
                                    <div 
                                        key={key} 
                                        className={`experience-sub-tab ${activeCategory === key ? 'active' : ''}`}
                                        onClick={() => setActiveCategory(key)}
                                    >
                                        {key.charAt(0).toUpperCase() + key.slice(1)}
                                    </div>
                                ))}
                            </div>
                            <div>
                                {experiencesData[activeCategory].map(renderExperience)}
                            </div>
                        </div>
                    )}

                    {selectedExperience && (
                        <MacOSModal title={selectedExperience.company} onClose={() => setSelectedExperience(null)}>
                            <h2>{selectedExperience.title}</h2>
                            <p><strong>{selectedExperience.company}</strong> | {selectedExperience.location}</p>
                            <p><em>{selectedExperience.dates}</em></p>
                            <ul>{selectedExperience.description.map((item, i) => <li key={i}>{item}</li>)}</ul>
                        </MacOSModal>
                    )}
                </div>
            );
        };
        
        // Thoughts Section Component (For Main Window)
        const Thoughts = () => {
            const [selectedPost, setSelectedPost] = useState(null);
            const [isFullScreen, setIsFullScreen] = useState(false);

            const handleSelectPost = (post) => {
                setSelectedPost(post);
                setIsFullScreen(false); // Reset fullscreen state when opening a new post
            };

            const handleClosePost = () => {
                setSelectedPost(null);
            };

            const toggleFullScreen = () => {
                setIsFullScreen(prev => !prev);
            };

            return (
                <div className="window-content">
                    <div className="thoughts-container">
                        {blogPosts.map(post => (
                             <div key={post.id} className="thought-post" onClick={() => handleSelectPost(post)}>
                                <h3>{post.title}</h3>
                                <em>{post.date}</em>
                                <p>{post.content}</p>
                            </div>
                        ))}
                    </div>
                    {selectedPost && (
                        <MacOSModal 
                            title={selectedPost.title} 
                            onClose={handleClosePost}
                            onGreenButtonClick={toggleFullScreen}
                            isFullScreen={isFullScreen}
                        >
                             <h2>{selectedPost.title}</h2>
                             <p><em>{selectedPost.date}</em></p>
                             <p style={{whiteSpace: 'pre-wrap', lineHeight: '1.7'}}>{selectedPost.content}</p>
                        </MacOSModal>
                    )}
                </div>
            );
        }
        
        // Main Window App Component
        const MainWindowApp = () => {
            const [activeTab, setActiveTab] = useState('professional');
            
            const renderContent = () => {
                switch (activeTab) {
                    case 'professional': return <Professional />;
                    case 'thoughts': return <Thoughts />;
                    default: return <Professional />;
                }
            };
            
            return (
                <div className="main-window">
                    <div className="window-title-bar">
                        <div className="window-controls">
                            <div className="window-dot red"><span>×</span></div>
                            <div className="window-dot yellow"></div>
                            <div className="window-dot green"></div>
                        </div>
                        <div className="window-title">Portfolio.app</div>
                        <div style={{width: '58px'}}></div>
                    </div>
                    <div className="tabs">
                        <div className={`tab ${activeTab === 'professional' ? 'active' : ''}`} onClick={() => setActiveTab('professional')}>Professional</div>
                        <div className={`tab ${activeTab === 'thoughts' ? 'active' : ''}`} onClick={() => setActiveTab('thoughts')}>Thoughts</div>
                    </div>
                    {renderContent()}
                </div>
            );
        };
        
        // Chat View Component (For Phone)
        const ChatView = ({ contactId, onBack }) => {
            const contact = conversations[contactId];
            const [displayedMessages, setDisplayedMessages] = useState([]);
            const [finalMessageText, setFinalMessageText] = useState("");

            useEffect(() => {
                setDisplayedMessages(contact.messages.slice(0, -1));
                setFinalMessageText("");
                
                let typingInterval;
                const typingTimeout = setTimeout(() => {
                    const finalMessage = contact.messages[contact.messages.length - 1];
                    let i = 0;
                    const text = finalMessage.text;
                    
                    typingInterval = setInterval(() => {
                        i++;
                        setFinalMessageText(text.substring(0, i));
                        
                        if (i >= text.length) {
                            clearInterval(typingInterval);
                            setDisplayedMessages(prev => [...prev, finalMessage]);
                            setFinalMessageText("");
                        }
                    }, 50);
                }, 1000);

                return () => {
                    clearTimeout(typingTimeout);
                    if (typingInterval) clearInterval(typingInterval);
                };
            }, [contactId]);

            return (
                <div className="chat-view">
                    <div className="chat-header">
                        <div className="back-button" onClick={onBack}>&lt; Messages</div>
                        <div className="chat-contact-name">{contact.name}</div>
                    </div>
                    <div className="message-area">
                        {displayedMessages.map((msg, i) => (
                            <div key={i} className={`message ${msg.sender === 'me' ? 'outgoing' : 'incoming'}`}>{msg.text}</div>
                        ))}
                        {finalMessageText && <div className="message incoming">{finalMessageText}</div>}
                    </div>
                </div>
            );
        };

        // Inbox View Component (For Phone)
        const InboxView = ({ onContactClick }) => (
            <>
                <div className="inbox-header"><h1>Messages</h1></div>
                <div className="contact-list">
                    {Object.keys(conversations).map(id => {
                        const contact = conversations[id];
                        return (
                            <div key={id} className="contact" onClick={() => onContactClick(id)}>
                                <div className="contact-avatar" style={{ backgroundColor: contact.avatarColor }}>{contact.avatar}</div>
                                <div className="contact-details">
                                    <div className="contact-name">
                                        <span>{contact.name}</span>
                                        <span>Just now &gt;</span>
                                    </div>
                                    <div className="contact-preview">{contact.messages[0].text}</div>
                                </div>
                            </div>
                        );
                    })}
                </div>
            </>
        );

        // Phone App Component
        const PhoneApp = () => {
            const [activeView, setActiveView] = useState('inbox');
            const [selectedContact, setSelectedContact] = useState(null);
            const [time, setTime] = useState(new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: false }));
            
            useEffect(() => {
                const timer = setInterval(() => {
                    setTime(new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: false }));
                }, 60000);
                return () => clearInterval(timer);
            }, []);

            const handleContactClick = (contactId) => {
                setSelectedContact(contactId);
                setActiveView('chat');
            };

            const handleBackToInbox = () => {
                setActiveView('inbox');
                setSelectedContact(null);
            };

            return (
                <div className="phone">
                    <div className="phone-notch"></div>
                    <div className="screen">
                        <div className="status-bar">
                            <span>{time}</span>
                            <div className="status-bar-icons">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                    <path d="M5 12.55a11 11 0 0 1 14.08 0"></path>
                                    <path d="M1.42 9a16 16 0 0 1 21.16 0"></path>
                                    <path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path>
                                    <line x1="12" y1="20" x2="12.01" y2="20"></line>
                                </svg>
                            </div>
                        </div>
                        {activeView === 'inbox' ? (
                            <InboxView onContactClick={handleContactClick} />
                        ) : (
                            <ChatView contactId={selectedContact} onBack={handleBackToInbox} />
                        )}
                        {activeView === 'inbox' && <div className="home-indicator"></div>}
                    </div>
                </div>
            );
        };

        // Root Component to manage the entire OS UI
        const PortfolioOS = () => {
             // Effect to manage top bar clock
            useEffect(() => {
                const timeEl = document.getElementById('top-time');
                const updateTime = () => {
                    const now = new Date();
                    timeEl.textContent = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                };
                updateTime();
                const timer = setInterval(updateTime, 60000);
                return () => clearInterval(timer);
            }, []);
            
            return (
                <StrictMode>
                    <div className="top-bar">
                        <div className="top-bar-left">
                            <div className="logo">Shrey's Portfolio</div>
                            <div className="menu-items">
                                <div className="menu-item">File</div>
                                <div className="menu-item">Edit</div>
                                <div className="menu-item">View</div>
                            </div>
                        </div>
                        <div className="notch">
                            <span></span>
                        </div>
                        <div className="top-bar-right">
                            <span id="top-time">--:--</span>
                        </div>
                    </div>
                    
                    <div className="desktop">
                        <div className="left-panel">
                            <iframe 
                                className="spotify-embed"
                                src="https://open.spotify.com/embed/playlist/5mypPIA8Gp9DHI7VIXGkq7?utm_source=generator&theme=0" 
                                width="100%" 
                                height="352" 
                                frameBorder="0" 
                                allowFullScreen
                                allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
                                loading="lazy">
                            </iframe>
                            <div className="phone-container">
                                <PhoneApp />
                            </div>
                        </div>
                        
                        <div className="right-panel">
                            <MainWindowApp />
                        </div>
                    </div>
                    
                    <div className="taskbar">
                        <div className="taskbar-content">
                             <a href="https://github.com/shreyk2" target="_blank" className="taskbar-link">GitHub</a>
                             <a href="https://www.linkedin.com/in/shrey-katyal" target="_blank" className="taskbar-link">LinkedIn</a>
                             <a href="mailto:shreykatyal21@gmail.com" className="taskbar-link">Email Me</a>
                        </div>
                    </div>

                    <div className="mobile-blocker">
                        <h2>Desktop Recommended</h2>
                        <p>For the best viewing experience, please visit this page from a desktop computer.</p>
                    </div>
                </StrictMode>
            );
        };
        
        // Render the apps into their designated root elements using the new React 18 createRoot API
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<PortfolioOS />);

    </script>
</body>
</html>
